!!! 5
%html
  %head
    %meta{:charset => "utf-8"}
    %meta{:name => "viewport", :content => "width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"}
    - if platform == :ios
      %meta{:name => "apple-mobile-web-app-capable", :content => "yes"}
      %meta{:name => "apple-mobile-web-app-status-bar-style", :content => "black"}

    %title Soy Reportero
    %link{:rel => "stylesheet", :href => "css/jquery.mobile-1.3.1.css"}
    /%link{:rel => "stylesheet", :href => "jqm_themes/android/android-theme.css"}
    %link{:rel => "stylesheet", :href => "css/jquery.mobile.iscrollview.css"}
    %link{:rel => "stylesheet", :href => "css/jquery.mobile.iscrollview-pull.css"}
    %link{:rel => "stylesheet", :href => "css/main.css"}
    %script{:src => "http://weinre.kgdesignes.com/target/target-script-min.js#soyreportero@#{platform.to_s}"}
    / Debug at http://weinre.kgdesignes.com/client/#soyreportero@android
    - case platform
      - when :android
        %script{:type => "text/javascript", :charset => "utf-8", :src => "cordova-2.6.0-android.js"}
      - when :ios
        %script{:type => "text/javascript", :charset => "utf-8", :src => "cordova-2.6.0-ios.js"}


    %script{:type => "text/javascript", :charset => "utf-8", :src => "js/lib/jquery-1.9.1.min.js"}
    %script{:type => "text/javascript", :charset => "utf-8", :src => "js/lib/jquery.mobile.router.js"}
    %script{:type => "text/javascript", :charset => "utf-8", :src => "js/lib/jquery.mobile-1.3.1.js"}
    %script{:type => "text/javascript", :charset => "utf-8", :src => "js/lib/iscroll.js"}
    %script{:type => "text/javascript", :charset => "utf-8", :src => "js/lib/jquery.mobile.iscrollview.js"}

    %script{:type => "text/javascript", :charset => "utf-8", :src => "js/lib/omplayer.telesur.js"}

    %script{:type => "text/javascript", :charset => "utf-8", :src => "js/lib/underscore.js"}
    %script{:type => "text/javascript", :charset => "utf-8", :src => "js/lib/backbone.js"}

    %script{:type => "text/javascript", :charset => "utf-8", :src => "js/lib/md5_lib.js"}
    %script{:type => "text/javascript", :charset => "utf-8", :src => "js/omlib.js"}
    %script{:type => "text/javascript", :charset => "utf-8", :src => "js/ui.js"}

    %script{:type => "text/javascript", :charset => "utf-8", :src => "js/pages/main.js"}
    %script{:type => "text/javascript", :charset => "utf-8", :src => "js/pages/select.js"}
    %script{:type => "text/javascript", :charset => "utf-8", :src => "js/pages/form.js"}
    %script{:type => "text/javascript", :charset => "utf-8", :src => "js/pages/list.js"}
    %script{:type => "text/javascript", :charset => "utf-8", :src => "js/pages/view.js"}
    :javascript
      var platform = "#{platform}";

    %script{:id => "list-page-list-item-template", :type => "text/template", :charset => "utf-8"}
      = render_partial 'pages/list/list-item.haml', {:platform => platform}.merge(locals)
  %body
    - pages.each_pair do |page, locals|
      = render_partial '_base.haml', {:platform => platform, :page => page}.merge(locals)
